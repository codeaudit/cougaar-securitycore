This file contains instructions for building and installing the security services.

Requirements
============
Running a security-enhanced Cougaar society requires:
* Cougaar version 9.4.1
* JDK or JRE version 1.4
* ANT version 1.5 or higher

Directory structure
===================
The securityservices module has the following directory structure:
      * top-level directory - contains a Makefile used to build the security
      services
      * src	- contains the source code for the security services
      * sys - contains the additional jar files required for security and
      KAoS policy integration.
      * test/bin - additional scripts to build and run a society:
         SecureNode: run a security-enhanced Cougaar society,
      * test/configs/demo - to contain all the scripts for launching a sample
	society
      * test/configs/common - Contains essential files that should
      be shared by all Cougaar configurations.
      * test/doc - documentation for the securityservices module

Compiling and building JAR files
================================
1. Set the CVSROOT to point to NAI Labs cvs module:

setenv CVSROOT :ext:user@cvs.utralog.net:/cvs/security/nai # for tcsh or csh shell users
export CVSROOT=:ext:user@cvs.utralog.net:/cvs/security/nai # for bash shell users

2. Unpack the security services distribution and go to the top level of the 
   source code tree. From cvs type the following:

       cvs co securityservices

3. Run the ant script
       cd securityservices
       ant install


Jar files
=========
The security services are separated into the following Java archives:
CougaarCRLextensions.jar: A jar file for issuing indirect CRLs.
idmef.jar:                An implementation of the IDMEF standard
securebootstrapper.jar:   Contains classes necessary to initialize a security
                          enhanced Ultra*Log node.
securityservices.jar:     The securityservices.jar archive contains the cryptographic,
                          access control, and monitoring & response services.

Configuration
=============
A security-enhanced society should be configured and executed using CSMART.
CSMART recipes for the security services have been checked in under the
test/configs/recipes directory.

1) Installing and configuring Cougaar and CSMART
Follow the instructions provided in the core distribution to install and configure CSMART.

2) Importing security services recipes to the MySQL database.
All CSMART recipes should be imported in the MySQL database.
The "recipesimport.csh" script under the test/configs/recipes directory imports all the
recipes.

3) Import the community configuration.
Import the community_attribute.csv and community_entity_attribute.csv files to the MySQL
database. This can be done by:
   a) copying the .csv files to th $CIP/csmart/data/database/scripts/mysql directory
   b) executing the load_communities.bat script. Note that the load_communities.sh
      script seems to be broken.

4) Configuring CSMART for a specific society.
Create a new experiment such as the full 1ad or the small 1ad society.
Import the security services recipes in your experiment as described in the README.config file.

5) Install and configure a CA.
At least one Certificate Authority should be installed. Follow the instructions provided in
the README.certificateAuthority file.

6) Run the society.
Use the CSMART society experiment controller to run the society.

Running a security-enhanced node standalone
===========================================
A security-enhanced node is executed by using the following script:

	test/bin/SecureNode <options>

where <options> are the same command-line arguments as for the Node script.
This script sets environment variables specific to the security services
and executes the boostrapper, which launches the node.

