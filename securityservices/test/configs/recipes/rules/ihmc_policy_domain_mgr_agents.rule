####################################################
# ihmc_policy_domain_mgr_agents.rule
# Adds PolicyDomainManagers 

society.each_node do |node|
  agentname = ""
  if node.name == "FWD-MGMT-NODE"
    enclave = "1"
    agentname = "PolicyDomainManager" + enclave
  elsif node.name == "REAR-MGMT-NODE"
    enclave = "2"
    agentname = "PolicyDomainManager" + enclave
  elsif node.name == "CONUS-MGMT-NODE" 
    enclave = "3"
    agentname = "PolicyDomainManager" + enclave
  elsif node.name == "TRANS-MGMT-NODE"
    enclave = "4"
    agentname = "PolicyDomainManager" + enclave
  end

  if agentname != ""
    node.add_agent(agentname) do |agent|
      agent.add_component do |c|
        c.classname = "org.cougaar.mlm.plugin.organization.OrgReportPlugin"
      end
      agent.add_component do |c|
        c.classname = "org.cougaar.mlm.plugin.organization.OrgDataPlugin"
      end
      agent.add_component do |c|
        c.classname = "safe.policyManager.DomainManagerPlugin"
        c.add_argument("domainName=PolicyDomainManager" + enclave + "Domain")
        c.add_argument("useJTP=true")
        c.add_argument("ontologySet=ultralog")
      end
      agent.add_component do |c|
        c.classname = "safe.policyManager.ConditionMonitorPlugin"
      end
      agent.add_component do |c|
        c.classname = "safe.policyManager.SetOperatingModeServletComponent"
      end
      agent.add_component do |c|
        c.classname = "org.cougaar.core.adaptivity.OperatingModePolicyManager"
      end
      agent.add_component do |c|
        c.classname = "org.cougaar.core.adaptivity.OperatingModeServiceProvider"
      end
      agent.add_component do |c|
        c.classname = "org.cougaar.core.adaptivity.PlaybookManager"
        c.add_argument("dummyPlays.txt")
      end
      agent.add_component do |c|
        c.classname = "safe.policyManager.PolicyExpanderPlugin"
      end
    end
  end
end
