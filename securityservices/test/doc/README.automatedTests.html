This README file explains how to install and configure the test suite
for the security services.

INTRODUCTION
============
The test suite has the following capabilities:
* A series of regression tests can be run on a regular basis (e.g. every
  day) to verify that the security services do not have bugs.
* During a test, one or more nodes are executed concurrently. The order
  and the timing of the nodes execution can be controlled. Since nodes are
  supposed to run forever, each node is given a maximum amount of time
  during which it must perform its operation (at least for test purposes).
  An operation can be executed before and after the node is executed.
  For instance, configuration files can be customized during the
  pre-operation and files can be cleaned up or analyzed during the
  post-operation.
* Tests are executed sequentially.
* After all the tests have been executed, a program analyzes the results
  and determines whether the test has been successful or not.
* The set of nodes can be executed on one or multiple hosts.
* A dashboard, which is accessible from a web page, provides a summary
  of the test results and has links to log details. The dashboard is updated
  every time the test suite is executed.
* The latest version of the securityservices module is fetched every time
  the test suite is executed.
* The test suite must currently be executed on Linux. There is no support
  for Windows.

INSTALLATION
============

* Create a user for the Tomcat web server and another user for the tests.
  For example, create a "tomcat" user and a "junittest" user.
  The Tomcat web server (which is used to run the dashboard) and the
  test suite should be executed under two different users.
  This is because Tomcat is a java application and the test suite kills
  all java processes on all machines where the tests are executed.
  An alternative is to run the Tomcat server on a host where the test
  suite will not be executed.
* Install Java web services (or at a minimum Tomcat)
    http://java.sun.com/webservices/downloads/webservicespack.html
  In general, the installation directory is ${HOME/jwsdp-1_0.
* Install and configure ssh and sshd on every host where the tests will
  be executed. Configure ssh for the "junittest" user so that the user
  can log to another machine without human intervention. For example,
  create a private/public key pair with no passphrase.
  The test suite uses ssh to run nodes remotely.
* Configure CVS for the junittest user. The junittest user should be able
  to checkout and update the securityservices module from the CVS server
  (currently cvs.ultralog.net).
  Since the securityservices module is updated before the test suite is
  executed, make sure the junittest user can update from CVS without user
  intervention.
* Checkout the securityservices module from CVS in the directory of your
  choice.
    cvs checkout securityservices
* Install the version of Cougaar that matches the version of the
  securityservices module.
* Install ant version >= 1.5
  Optional tasks are required to run the junit tests and the result analyzis.
  Add junit.jar and Xalan 2.x to the ant/lib directory
    JUNIT can be found at http://www.junit.org
    XALAN can be found at http://xml.apache.org/xalan-j
* Install and customize the crontab for the junittest user.
  A crontab example is available under regress/config/nodeTest/crontab.
  By default, the crontab executes the tests every 2 hours.

CONFIGURATION
=============
A number of files must be customized for your environment before the
tests can be executed.

* build-dashboard.xml
  This file is used to update the dashboard every time the test suite is
  executed. Dashboard web pages are copied to the Tomcat.
* TODO: describe all files.

TEST SUITE
==========

All the tests assume that Cougaar has been installed on every host where nodes will be
executed. In addition, software such as LDAP must be installed in order to run some of the
tests. For example, the CA requires OpenLdap to store certificates.

The following tests are currently implemented:

Start a CA from scratch
-----------------------
Description:
  This test executes a certificate authority from scratch.
Pre-operations:
  The CA keystore is deleted,
  All the certificates are removed from the LDAP directory service.
Tests:
  The test verifies that no error is generated when the CA is initialized and executed.

Start a CA. Create a CA key
---------------------------
Description:
  This test executes a certificate authority and generate a CA key.
  The test simulates a CA administrator who would configure the CA and generate a key.
  This is done by invoking a CA servlet.
Tests:
  The test verifies that no error is generated, and that the CA key is actually created.

Restart a CA after CA key generation
------------------------------------
Description:
  This test executes a CA after the key has been generated.
Tests:
  The test verifies that no error is generated when a CA is stopped and restarted.

Start small-135 society using CA
--------------------------------
Description:
  This test executes the small 135 society.
Tests:
  The test verifies that all nodes can be started, and that all agents can get a certificate.
